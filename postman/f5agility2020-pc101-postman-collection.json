{
	"info": {
		"_postman_id": "f413e49d-0969-4c94-b467-fe0a079641a7",
		"name": "F5 Agility 2020 PC101 Lab",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Lab 4.3 - AS3 Declarations with Pool Member AutoDiscovery",
			"item": [
				{
					"name": "Step 1: Check AS3 - BIGIP1",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "password",
									"value": "{{bigip_admin_password}}",
									"type": "string"
								},
								{
									"key": "username",
									"value": "admin",
									"type": "string"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"type": "text",
								"value": "application/x-www-form-urlencoded"
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "https://{{bigip1_mgmt_ip}}/mgmt/shared/appsvcs/info",
							"protocol": "https",
							"host": [
								"{{bigip1_mgmt_ip}}"
							],
							"path": [
								"mgmt",
								"shared",
								"appsvcs",
								"info"
							]
						}
					},
					"response": []
				},
				{
					"name": "Step 2: Check AS3 - BIGIP2",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "password",
									"value": "{{bigip_admin_password}}",
									"type": "string"
								},
								{
									"key": "username",
									"value": "admin",
									"type": "string"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"type": "text",
								"value": "application/x-www-form-urlencoded"
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "https://{{bigip2_mgmt_ip}}/mgmt/shared/appsvcs/info",
							"protocol": "https",
							"host": [
								"{{bigip2_mgmt_ip}}"
							],
							"path": [
								"mgmt",
								"shared",
								"appsvcs",
								"info"
							]
						}
					},
					"response": []
				},
				{
					"name": "Step 3: Create AS3 - Example01/example01 with AutoDiscover pool members",
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "password",
									"value": "{{bigip_admin_password}}",
									"type": "string"
								},
								{
									"key": "username",
									"value": "admin",
									"type": "string"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"type": "text",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"class\": \"ADC\",\n    \"schemaVersion\": \"3.11.0\",\n    \"label\": \"Converted Declaration\",\n    \"remark\": \"Auto-generated by Project Charon\",\n    \"Common\": {\n        \"class\": \"Tenant\",\n        \"Shared\": {\n            \"class\": \"Application\",\n            \"template\": \"shared\",\n            \"pool1\": {\n                \"class\": \"Pool\",\n                \"monitors\": [\n                    {\n                        \"bigip\": \"/Common/http\"\n                    }\n                ],\n                \"members\": [\n                    {\n                        \"servicePort\": 80,\n                        \"addressDiscovery\": \"aws\",\n                        \"region\": \"us-west-2\",\n                        \"updateInterval\": 20,\n                        \"tagKey\": \"findme\",\n                        \"tagValue\": \"web\",\n                        \"addressRealm\": \"private\",\n                        \"adminState\": \"enable\",\n                        \"autoPopulate\": true,\n                        \"enable\": true\n                    },\n                    {\n                        \"servicePort\": 80,\n                        \"serverAddresses\": [\n                            \"192.168.0.55\"\n                        ]\n                    }\n                ]\n            }\n        }\n    },\n    \"Example01\": {\n        \"class\": \"Tenant\",\n        \"Shared\": {\n            \"class\": \"Application\",\n            \"template\": \"shared\",\n            \"example01a\": {\n                \"remark\": \"basic standard virtual server\",\n                \"layer4\": \"tcp\",\n                \"pool\": \"/Common/Shared/pool1\",\n                \"translateServerAddress\": true,\n                \"translateServerPort\": true,\n                \"class\": \"Service_TCP\",\n                \"profileTCP\": {\n                    \"bigip\": \"/Common/tcp\"\n                },\n                \"virtualAddresses\": [\n                    \"{{bigip1_example01_address}}\"\n                ],\n                \"virtualPort\": 80,\n                \"snat\": \"auto\"\n            },\n            \"example01b\": {\n                \"remark\": \"basic standard virtual server\",\n                \"layer4\": \"tcp\",\n                \"pool\": \"/Common/Shared/pool1\",\n                \"translateServerAddress\": true,\n                \"translateServerPort\": true,\n                \"class\": \"Service_TCP\",\n                \"profileTCP\": {\n                    \"bigip\": \"/Common/tcp\"\n                },\n                \"virtualAddresses\": [\n                    \"{{bigip2_example01_address}}\"\n                ],\n                \"virtualPort\": 80,\n                \"snat\": \"auto\"\n            }\n        }\n    }\n}"
						},
						"url": {
							"raw": "https://{{bigip1_mgmt_ip}}/mgmt/shared/appsvcs/declare?show=full",
							"protocol": "https",
							"host": [
								"{{bigip1_mgmt_ip}}"
							],
							"path": [
								"mgmt",
								"shared",
								"appsvcs",
								"declare"
							],
							"query": [
								{
									"key": "show",
									"value": "full"
								}
							]
						},
						"description": "AutoDiscover nodes will only join pool and light up green if dummy IP exists in declaration?\n\n                  {\n                        \"servicePort\": 80,\n                        \"serverAddresses\": [\n                            \"192.168.0.55\"\n                        ]\n                    }"
					},
					"response": []
				},
				{
					"name": "Step 4: Create AS3 - Example01/example01 HA Modern Protocols",
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "password",
									"value": "{{bigip_admin_password}}",
									"type": "string"
								},
								{
									"key": "username",
									"value": "admin",
									"type": "string"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"type": "text",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"class\": \"ADC\",\n    \"schemaVersion\": \"3.11.0\",\n    \"id\": \"urn:uuid:68bee3e5-0c0c-49ed-b7c4-778362a5520b\",\n    \"label\": \"Converted Declaration\",\n    \"remark\": \"Auto-generated by Project Charon\",\n    \"Common\": {\n        \"class\": \"Tenant\",\n        \"Shared\": {\n            \"class\": \"Application\",\n            \"template\": \"shared\",\n            \"pool1\": {\n                \"members\": [\n                    {\n                        \"servicePort\": 80,\n                        \"addressDiscovery\": \"aws\",\n                        \"region\": \"us-west-2\",\n                        \"updateInterval\": 20,\n                        \"tagKey\": \"findme\",\n                        \"tagValue\": \"web\",\n                        \"addressRealm\": \"private\",\n                        \"adminState\": \"enable\",\n                        \"autoPopulate\": true,\n                        \"enable\": true\n                    },\n                    {\n                        \"servicePort\": 80,\n                        \"serverAddresses\": [\n                            \"192.168.0.55\"\n                        ]\n                    }\n                ],\n                \"monitors\": [\n                    {\n                        \"bigip\": \"/Common/http\"\n                    }\n                ],\n                \"class\": \"Pool\"\n            }\n        }\n    },\n    \"Example01\": {\n        \"class\": \"Tenant\",\n        \"Shared\": {\n            \"class\": \"Application\",\n            \"template\": \"shared\",\n            \"certificate_default\": {\n                \"class\": \"Certificate\",\n                \"certificate\": {\n                    \"bigip\": \"/Common/default.crt\"\n                },\n                \"privateKey\": {\n                    \"bigip\": \"/Common/default.key\"\n                }\n            },\n            \"clientssl_secure_example01\": {\n                \"certificates\": [\n                    {\n                        \"certificate\": \"certificate_default\"\n                    }\n                ],\n                \"ciphers\": \"none\",\n                \"renegotiationEnabled\": false,\n                \"class\": \"TLS_Server\"\n            },\n            \"http2_example01\": {\n                \"class\": \"HTTP2_Profile\",\n                \"enforceTlsRequirements\": false\n            },\n            \"example01a\": {\n                \"remark\": \"basic standard virtual server\",\n                \"layer4\": \"tcp\",\n                \"pool\": \"/Common/Shared/pool1\",\n                \"translateServerAddress\": true,\n                \"translateServerPort\": true,\n                \"class\": \"Service_HTTPS\",\n                \"profileHTTP\": {\n                    \"bigip\": \"/Common/http\"\n                },\n                \"profileMultiplex\": {\n                    \"bigip\": \"/Common/oneconnect\"\n                },\n                \"profileTCP\": {\n                    \"bigip\": \"/Common/tcp\"\n                },\n                \"serverTLS\": \"clientssl_secure_example01\",\n                \"virtualAddresses\": [\n                    \"{{bigip1_example01_address}}\"\n                ],\n                \"virtualPort\": 443,\n                \"snat\": \"auto\"\n            },\n            \"example01b\": {\n                \"remark\": \"basic standard virtual server\",\n                \"layer4\": \"tcp\",\n                \"pool\": \"/Common/Shared/pool1\",\n                \"translateServerAddress\": true,\n                \"translateServerPort\": true,\n                \"class\": \"Service_HTTPS\",\n                \"profileHTTP\": {\n                    \"bigip\": \"/Common/http\"\n                },\n                \"profileMultiplex\": {\n                    \"bigip\": \"/Common/oneconnect\"\n                },\n                \"profileTCP\": {\n                    \"bigip\": \"/Common/tcp\"\n                },\n                \"serverTLS\": \"clientssl_secure_example01\",\n                \"virtualAddresses\": [\n                    \"{{bigip2_example01_address}}\"\n                ],\n                \"virtualPort\": 443,\n                \"snat\": \"auto\"\n            }\n        }\n    }\n}"
						},
						"url": {
							"raw": "https://{{bigip1_mgmt_ip}}/mgmt/shared/appsvcs/declare?show=full",
							"protocol": "https",
							"host": [
								"{{bigip1_mgmt_ip}}"
							],
							"path": [
								"mgmt",
								"shared",
								"appsvcs",
								"declare"
							],
							"query": [
								{
									"key": "show",
									"value": "full"
								}
							]
						},
						"description": "Works but I have to create the http2 profile first."
					},
					"response": []
				},
				{
					"name": "Step 5: Create AS3 - Example01/example01 HA Modern Protocols",
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "password",
									"value": "{{bigip_admin_password}}",
									"type": "string"
								},
								{
									"key": "username",
									"value": "admin",
									"type": "string"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"type": "text",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"class\": \"ADC\",\n    \"schemaVersion\": \"3.11.0\",\n    \"id\": \"urn:uuid:68bee3e5-0c0c-49ed-b7c4-778362a5520b\",\n    \"label\": \"Converted Declaration\",\n    \"remark\": \"Auto-generated by Project Charon\",\n    \"Common\": {\n        \"class\": \"Tenant\",\n        \"Shared\": {\n            \"class\": \"Application\",\n            \"template\": \"shared\",\n            \"pool1\": {\n                               \"members\": [\n                    {\n                        \"servicePort\": 80,\n                        \"addressDiscovery\": \"aws\",\n                        \"region\": \"us-west-2\",\n                        \"updateInterval\": 20,\n                        \"tagKey\": \"findme\",\n                        \"tagValue\": \"web\",\n                        \"addressRealm\": \"private\",\n                        \"adminState\": \"enable\",\n                        \"autoPopulate\": true,\n                        \"enable\": true\n                    },\n                    {\n                        \"servicePort\": 80,\n                        \"serverAddresses\": [\n                            \"192.168.0.55\"\n                        ]\n                    }\n                ],\n                \"monitors\": [\n                    {\n                        \"bigip\": \"/Common/http\"\n                    }\n                ],\n                \"class\": \"Pool\"\n            }\n        }\n    },\n    \"Example01\": {\n        \"class\": \"Tenant\",\n        \"Shared\": {\n            \"class\": \"Application\",\n            \"template\": \"shared\",\n            \"certificate_default\": {\n                \"class\": \"Certificate\",\n                \"certificate\": {\n                    \"bigip\": \"/Common/default.crt\"\n                },\n                \"privateKey\": {\n                    \"bigip\": \"/Common/default.key\"\n                }\n            },\n            \"clientssl_secure_example01\": {\n                \"certificates\": [\n                    {\n                        \"certificate\": \"certificate_default\"\n                    }\n                ],\n                \"ciphers\": \"none\",\n                \"renegotiationEnabled\": false,\n                \"class\": \"TLS_Server\"\n            },\n            \"http2_example01\": {\n                \"class\": \"HTTP2_Profile\",\n                \"enforceTlsRequirements\": false\n            },\n \n        \"example01a\": {\n            \"remark\": \"basic standard virtual server\",\n            \"layer4\": \"tcp\",\n            \"pool\": \"/Common/Shared/pool1\",\n            \"translateServerAddress\": true,\n            \"translateServerPort\": true,\n            \"class\": \"Service_HTTPS\",\n            \"profileHTTP\": {\n                \"bigip\": \"/Common/http\"\n            },\n            \"profileMultiplex\": {\n                \"bigip\": \"/Common/oneconnect\"\n            },\n            \"profileTCP\": {\n                \"bigip\": \"/Common/tcp\"\n            },\n            \"serverTLS\": \"clientssl_secure_example01\",\n            \"virtualAddresses\": [\n                \"{{bigip1_example01_address}}\"\n            ],\n            \"virtualPort\": 443,\n            \"snat\": \"auto\",\n            \"profileHTTP2\": {\n                \"bigip\": \"/Example01/Shared/http2_example01\"\n            }\n        },\n        \"example01b\": {\n            \"remark\": \"basic standard virtual server\",\n            \"layer4\": \"tcp\",\n            \"pool\": \"/Common/Shared/pool1\",\n            \"translateServerAddress\": true,\n            \"translateServerPort\": true,\n            \"class\": \"Service_HTTPS\",\n            \"profileHTTP\": {\n                \"bigip\": \"/Common/http\"\n            },\n            \"profileMultiplex\": {\n                \"bigip\": \"/Common/oneconnect\"\n            },\n            \"profileTCP\": {\n                \"bigip\": \"/Common/tcp\"\n            },\n            \"serverTLS\": \"clientssl_secure_example01\",\n            \"virtualAddresses\": [\n                \"{{bigip2_example01_address}}\"\n            ],\n            \"virtualPort\": 443,\n            \"snat\": \"auto\",\n            \"profileHTTP2\": {\n                \"bigip\": \"/Example01/Shared/http2_example01\"\n            }\n        }\n        }\n    }\n}"
						},
						"url": {
							"raw": "https://{{bigip1_mgmt_ip}}/mgmt/shared/appsvcs/declare?show=full",
							"protocol": "https",
							"host": [
								"{{bigip1_mgmt_ip}}"
							],
							"path": [
								"mgmt",
								"shared",
								"appsvcs",
								"declare"
							],
							"query": [
								{
									"key": "show",
									"value": "full"
								}
							]
						},
						"description": "Works but I have to create the http2 profile first."
					},
					"response": []
				},
				{
					"name": "Step 6: Create AS3 - Example01/example01 ECDSA Cert",
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "password",
									"value": "{{bigip_admin_password}}",
									"type": "string"
								},
								{
									"key": "username",
									"value": "admin",
									"type": "string"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"type": "text",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"class\": \"ADC\",\n    \"schemaVersion\": \"3.11.0\",\n    \"id\": \"urn:uuid:68bee3e5-0c0c-49ed-b7c4-778362a5520b\",\n    \"label\": \"Converted Declaration\",\n    \"remark\": \"Auto-generated by Project Charon\",\n    \"Common\": {\n        \"class\": \"Tenant\",\n        \"Shared\": {\n            \"class\": \"Application\",\n            \"template\": \"shared\",\n            \"pool1\": {\n                \"members\": [\n                    {\n                        \"servicePort\": 80,\n                        \"addressDiscovery\": \"aws\",\n                        \"region\": \"us-west-2\",\n                        \"updateInterval\": 20,\n                        \"tagKey\": \"findme\",\n                        \"tagValue\": \"web\",\n                        \"addressRealm\": \"private\",\n                        \"adminState\": \"enable\",\n                        \"autoPopulate\": true,\n                        \"enable\": true\n                    },\n                    {\n                        \"servicePort\": 80,\n                        \"serverAddresses\": [\n                            \"192.168.0.55\"\n                        ]\n                    }\n                ],\n                \"monitors\": [\n                    {\n                        \"bigip\": \"/Common/http\"\n                    }\n                ],\n                \"class\": \"Pool\"\n            }\n        }\n    },\n    \"Example01\": {\n        \"class\": \"Tenant\",\n        \"Shared\": {\n            \"class\": \"Application\",\n            \"template\": \"shared\",\n            \"certificate_default\": {\n                \"class\": \"Certificate\",\n                \"certificate\": {\n                    \"bigip\": \"/Common/default.crt\"\n                },\n                \"privateKey\": {\n                    \"bigip\": \"/Common/default.key\"\n                }\n            },\n            \"clientssl_secure_example01a\": {\n                \"certificates\": [\n                    {\n                        \"certificate\": \"webcert1a\"\n                    }\n                ],\n                \"ciphers\": \"none\",\n                \"renegotiationEnabled\": false,\n                \"class\": \"TLS_Server\"\n            },\n            \"webcert1a\": {\n                \"class\": \"Certificate\",\n                \"remark\": \"in practice we recommend using a passphrase\",\n                \"certificate\": \"{{example01a_cert}}\",\n                \"privateKey\": \"{{example01a_key}}\"\n            },\n            \"clientssl_secure_example01b\": {\n                \"certificates\": [\n                    {\n                        \"certificate\": \"webcert1b\"\n                    }\n                ],\n                \"ciphers\": \"none\",\n                \"renegotiationEnabled\": false,\n                \"class\": \"TLS_Server\"\n            },\n            \"webcert1b\": {\n                \"class\": \"Certificate\",\n                \"remark\": \"in practice we recommend using a passphrase\",\n                \"certificate\": \"{{example01b_cert}}\",\n                \"privateKey\": \"{{example01b_key}}\"\n            },\n            \"http2_example01\": {\n                \"class\": \"HTTP2_Profile\",\n                \"enforceTlsRequirements\": false\n            },\n            \"example01a\": {\n                \"remark\": \"basic standard virtual server\",\n                \"layer4\": \"tcp\",\n                \"pool\": \"/Common/Shared/pool1\",\n                \"translateServerAddress\": true,\n                \"translateServerPort\": true,\n                \"class\": \"Service_HTTPS\",\n                \"profileHTTP\": {\n                    \"bigip\": \"/Common/http\"\n                },\n                \"profileMultiplex\": {\n                    \"bigip\": \"/Common/oneconnect\"\n                },\n                \"profileTCP\": {\n                    \"bigip\": \"/Common/tcp\"\n                },\n                \"serverTLS\": \"clientssl_secure_example01a\",\n                \"virtualAddresses\": [\n                    \"{{bigip1_example01_address}}\"\n                ],\n                \"virtualPort\": 443,\n                \"snat\": \"auto\",\n                \"profileHTTP2\": {\n                    \"bigip\": \"/Example01/Shared/http2_example01\"\n                }\n            },\n            \"example01b\": {\n                \"remark\": \"basic standard virtual server\",\n                \"layer4\": \"tcp\",\n                \"pool\": \"/Common/Shared/pool1\",\n                \"translateServerAddress\": true,\n                \"translateServerPort\": true,\n                \"class\": \"Service_HTTPS\",\n                \"profileHTTP\": {\n                    \"bigip\": \"/Common/http\"\n                },\n                \"profileMultiplex\": {\n                    \"bigip\": \"/Common/oneconnect\"\n                },\n                \"profileTCP\": {\n                    \"bigip\": \"/Common/tcp\"\n                },\n                \"serverTLS\": \"clientssl_secure_example01b\",\n                \"virtualAddresses\": [\n                    \"{{bigip2_example01_address}}\"\n                ],\n                \"virtualPort\": 443,\n                \"snat\": \"auto\",\n                \"profileHTTP2\": {\n                    \"bigip\": \"/Example01/Shared/http2_example01\"\n                }\n            }\n        }\n    }\n}"
						},
						"url": {
							"raw": "https://{{bigip1_mgmt_ip}}/mgmt/shared/appsvcs/declare?show=full",
							"protocol": "https",
							"host": [
								"{{bigip1_mgmt_ip}}"
							],
							"path": [
								"mgmt",
								"shared",
								"appsvcs",
								"declare"
							],
							"query": [
								{
									"key": "show",
									"value": "full"
								}
							]
						},
						"description": "Works but I have to move the \"No TLSV1.3\" out of the Enabled Options list. How can I make the clientssl-secure the parent profile instead of clientssl?"
					},
					"response": []
				}
			],
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"id": "3db7cae0-946d-4fde-8803-06c6ead6fdf9",
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				},
				{
					"listen": "test",
					"script": {
						"id": "d83b2254-2cb2-40da-b616-8b7d057114c4",
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				}
			],
			"protocolProfileBehavior": {}
		}
	],
	"protocolProfileBehavior": {}
}